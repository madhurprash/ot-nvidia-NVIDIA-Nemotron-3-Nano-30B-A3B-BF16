Get:1 http://deb.debian.org/debian stable InRelease [140 kB]
Get:2 http://deb.debian.org/debian trixie InRelease [140 kB]
Get:3 http://deb.debian.org/debian trixie-updates InRelease [47.3 kB]
Get:4 http://deb.debian.org/debian-security trixie-security InRelease [43.4 kB]
Get:5 http://deb.debian.org/debian trixie-updates/main amd64 Packages.diff/Index [2713 B]
Err:5 http://deb.debian.org/debian trixie-updates/main amd64 Packages.diff/Index
  Need 5956 compressed bytes, but limit is 5412 and original is 5412
Get:6 http://deb.debian.org/debian stable/main Sources [10.5 MB]
Get:7 http://deb.debian.org/debian trixie/main amd64 Packages [9670 kB]
Get:7 http://deb.debian.org/debian trixie/main amd64 Packages [9670 kB]
Ign:5 http://deb.debian.org/debian trixie-updates/main amd64 Packages.diff/Index
Get:8 http://deb.debian.org/debian-security trixie-security/main amd64 Packages [94.5 kB]
Get:9 http://deb.debian.org/debian trixie-updates/main amd64 Packages [5412 B]
Fetched 20.7 MB in 2s (9603 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libcurl3t64-gnutls libcurl4t64
The following packages will be upgraded:
  curl libcurl3t64-gnutls libcurl4t64
3 upgraded, 0 newly installed, 0 to remove and 36 not upgraded.
Need to get 1044 kB of archives.
After this operation, 0 B of additional disk space will be used.
Get:1 http://deb.debian.org/debian trixie/main amd64 curl amd64 8.14.1-2+deb13u2 [270 kB]
Get:2 http://deb.debian.org/debian trixie/main amd64 libcurl4t64 amd64 8.14.1-2+deb13u2 [391 kB]
Get:3 http://deb.debian.org/debian trixie/main amd64 libcurl3t64-gnutls amd64 8.14.1-2+deb13u2 [383 kB]
Fetched 1044 kB in 0s (15.9 MB/s)
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 33177 files and directories currently installed.)
Preparing to unpack .../curl_8.14.1-2+deb13u2_amd64.deb ...
Unpacking curl (8.14.1-2+deb13u2) over (8.14.1-2) ...
Preparing to unpack .../libcurl4t64_8.14.1-2+deb13u2_amd64.deb ...
Unpacking libcurl4t64:amd64 (8.14.1-2+deb13u2) over (8.14.1-2) ...
Preparing to unpack .../libcurl3t64-gnutls_8.14.1-2+deb13u2_amd64.deb ...
Unpacking libcurl3t64-gnutls:amd64 (8.14.1-2+deb13u2) over (8.14.1-2) ...
Setting up libcurl4t64:amd64 (8.14.1-2+deb13u2) ...
Setting up libcurl3t64-gnutls:amd64 (8.14.1-2+deb13u2) ...
Setting up curl (8.14.1-2+deb13u2) ...
Processing triggers for man-db (2.13.1-1) ...
Processing triggers for libc-bin (2.41-12) ...
no checksums to verify
installing to /root/.local/bin
  uv
  uvx
everything's installed!

To add $HOME/.local/bin to your PATH, either restart your shell or run:

    source $HOME/.local/bin/env (sh, bash, zsh)
    source $HOME/.local/bin/env.fish (fish)
============================= test session starts ==============================
platform linux -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
plugins: json-ctrf-0.3.5
collected 3 items

../tests/test_outputs.py ..F                                             [100%]

=================================== FAILURES ===================================
___________________________ test_warrior_performance ___________________________

    def test_warrior_performance():
        """Test that my_warrior meets win rate thresholds against all opponents."""
        warriors_and_thresholds = {
            "stone.red": 75,
            "vampire.red": 75,
            "paper.red": 75,
            "snake.red": 33,
            "g2-clear.red": 33,
        }
    
        results = {}
        total_passes = 0
        total_tests = len(warriors_and_thresholds)
    
        for warrior, min_win_rate in warriors_and_thresholds.items():
            result = subprocess.run(
                [
                    "pmars",
                    "-b",
                    "-r",
                    "100",
                    "-f",
                    "/app/my_warrior.red",
                    f"/app/warriors/{warrior}",
                ],
                capture_output=True,
                text=True,
            )
    
            assert result.returncode == 0, (
                f"pmars failed against {warrior}: {result.stderr}"
            )
    
            wins = int(result.stdout.strip().split("\n")[-1].split()[1])
            win_rate = wins
            results[warrior] = win_rate
    
            status = "PASS" if win_rate >= min_win_rate else "FAIL"
            if status == "PASS":
                total_passes += 1
    
            print(
                f"vs {warrior:<12}: {wins:>3}/100 wins ({win_rate:>3}%) - "
                f"{status} (need {min_win_rate}%+)"
            )
    
        # Print summary before individual assertions
        passed_opponents = [
            w for w, rate in results.items() if rate >= warriors_and_thresholds[w]
        ]
        failed_opponents = [
            w for w, rate in results.items() if rate < warriors_and_thresholds[w]
        ]
    
        passed_list = ", ".join(passed_opponents) if passed_opponents else "None"
        failed_list = ", ".join(failed_opponents) if failed_opponents else "None"
    
        print(f"PASSED ({len(passed_opponents)}/{total_tests}): {passed_list}")
        print(f"FAILED ({len(failed_opponents)}/{total_tests}): {failed_list}")
    
        for warrior, min_win_rate in warriors_and_thresholds.items():
            win_rate = results[warrior]
>           assert win_rate >= min_win_rate, (
                f"Only achieved {win_rate}% win rate vs {warrior} (need {min_win_rate}%+)"
            )
E           AssertionError: Only achieved 58% win rate vs stone.red (need 75%+)
E           assert 58 >= 75

/tests/test_outputs.py:106: AssertionError
----------------------------- Captured stdout call -----------------------------
vs stone.red   :  58/100 wins ( 58%) - FAIL (need 75%+)
vs vampire.red :  77/100 wins ( 77%) - PASS (need 75%+)
vs paper.red   :  83/100 wins ( 83%) - PASS (need 75%+)
vs snake.red   :   0/100 wins (  0%) - FAIL (need 33%+)
vs g2-clear.red:  13/100 wins ( 13%) - FAIL (need 33%+)
PASSED (2/5): vampire.red, paper.red
FAILED (3/5): stone.red, snake.red, g2-clear.red
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_opponents_integrity
PASSED ../tests/test_outputs.py::test_warrior_exists
FAILED ../tests/test_outputs.py::test_warrior_performance - AssertionError: O...
========================= 1 failed, 2 passed in 0.59s ==========================
