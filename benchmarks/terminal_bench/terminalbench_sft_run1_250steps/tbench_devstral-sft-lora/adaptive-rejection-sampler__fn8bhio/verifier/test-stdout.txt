Hit:1 http://security.ubuntu.com/ubuntu noble-security InRelease
Hit:2 http://archive.ubuntu.com/ubuntu noble InRelease
Hit:3 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:4 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following NEW packages will be installed:
  curl
0 upgraded, 1 newly installed, 0 to remove and 9 not upgraded.
Need to get 226 kB of archives.
After this operation, 534 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu noble-updates/main amd64 curl amd64 8.5.0-2ubuntu10.6 [226 kB]
Fetched 226 kB in 1s (251 kB/s)
Selecting previously unselected package curl.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 20375 files and directories currently installed.)
Preparing to unpack .../curl_8.5.0-2ubuntu10.6_amd64.deb ...
Unpacking curl (8.5.0-2ubuntu10.6) ...
Setting up curl (8.5.0-2ubuntu10.6) ...
no checksums to verify
installing to /root/.local/bin
  uv
  uvx
everything's installed!

To add $HOME/.local/bin to your PATH, either restart your shell or run:

    source $HOME/.local/bin/env (sh, bash, zsh)
    source $HOME/.local/bin/env.fish (fish)
============================= test session starts ==============================
platform linux -- Python 3.13.9, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
plugins: json-ctrf-0.3.5
collected 9 items

../tests/test_outputs.py .F.F.....                                       [100%]

=================================== FAILURES ===================================
_______________ test_can_generate_standard_distribution_samples ________________

    def test_can_generate_standard_distribution_samples():
        """Test implementation can generate samples from standard distributions."""
        app_dir = Path("/app")
    
        # Test R implementation by sourcing ars.R and running tests
        test_code_r = """
    library(stats)
    
    # Source the required ars.R file
    source("ars.R")
    
    # Test normal distribution sampling
    normal_density <- function(x) {
        dnorm(x, mean = 0, sd = 1)
    }
    
    # Try to generate samples
    tryCatch({
        samples <- ars(normal_density, c(-5, 5), n = 1000)
    
        if (length(samples) >= 900) {  # Allow some tolerance
            mean_val <- mean(samples)
            std_val <- sd(samples)
    
            if (abs(mean_val) < 0.2 && std_val > 0.8 && std_val < 1.2) {
                cat("PASS: Generated valid normal samples\n")
            } else {
                cat("ERROR: Mean or std out of range\n")
            }
        } else {
            cat("ERROR: Insufficient samples generated\n")
        }
    }, error = function(e) {
        cat("ERROR: Failed to generate samples:", conditionMessage(e), "\n")
    })
    """
    
        # Run R test
        test_file = app_dir / "test_normal_sampler.R"
        test_file.write_text(test_code_r)
        try:
            result = subprocess.run(
                ["Rscript", str(test_file)],
                capture_output=True,
                text=True,
                cwd=str(app_dir),
                timeout=30,
            )
            output = result.stdout + result.stderr
>           assert "PASS" in output, (
                f"Failed to generate valid normal samples. Output: {output}"
            )
E           AssertionError: Failed to generate valid normal samples. Output: ERROR: Mean or std out of range
E             There were 12 warnings (use warnings() to see them)
E             
E           assert 'PASS' in 'ERROR: Mean or std out of range\nThere were 12 warnings (use warnings() to see them)\n'

/tests/test_outputs.py:81: AssertionError
_____________________ test_formal_testing_with_known_truth _____________________

    def test_formal_testing_with_known_truth():
        """Test that formal testing outputs correct format as specified."""
        app_dir = Path("/app")
    
        # Run the test function and check output format
        test_code = """
    source("ars.R")
    # Run the test function if it exists
    if (exists("test")) {
        test()
    } else {
        cat("ERROR: test function not found\n")
    }
    """
    
        test_file = app_dir / "run_test.R"
        test_file.write_text(test_code)
        try:
>           result = subprocess.run(
                ["Rscript", str(test_file)],
                capture_output=True,
                text=True,
                cwd=str(app_dir),
                timeout=60,
            )

/tests/test_outputs.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/subprocess.py:556: in run
    stdout, stderr = process.communicate(input, timeout=timeout)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/subprocess.py:1222: in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/subprocess.py:2129: in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Popen: returncode: -9 args: ['Rscript', '/app/run_test.R']>
endtime = 381401.601396878, orig_timeout = 60
stdout_seq = [b'\n=== ADAPTIVE REJECTION SAMPLER TESTS ===\n\nTest 1: Standard Normal Distribution\n', b'Mean: -0.0014, SD: 0.9662,...b'Mean: 0.0936, SD: 0.4387\nTEST_2_EXPONENTIAL_DISTRIBUTION: FAIL\n\nTest 3: Beta Distribution (shape1=2, shape2=5)\n']
stderr_seq = [], skip_check_and_raise = False

    def _check_timeout(self, endtime, orig_timeout, stdout_seq, stderr_seq,
                       skip_check_and_raise=False):
        """Convenience for checking if a timeout has expired."""
        if endtime is None:
            return
        if skip_check_and_raise or _time() > endtime:
>           raise TimeoutExpired(
                    self.args, orig_timeout,
                    output=b''.join(stdout_seq) if stdout_seq else None,
                    stderr=b''.join(stderr_seq) if stderr_seq else None)
E           subprocess.TimeoutExpired: Command '['Rscript', '/app/run_test.R']' timed out after 60 seconds

/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/subprocess.py:1269: TimeoutExpired
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_ars_function_exists
PASSED ../tests/test_outputs.py::test_has_test_function
PASSED ../tests/test_outputs.py::test_sample_files_generated
PASSED ../tests/test_outputs.py::test_implementation_is_modular
PASSED ../tests/test_outputs.py::test_implementation_handles_errors
PASSED ../tests/test_outputs.py::test_input_validation_functionality
PASSED ../tests/test_outputs.py::test_log_concavity_functionality
FAILED ../tests/test_outputs.py::test_can_generate_standard_distribution_samples
FAILED ../tests/test_outputs.py::test_formal_testing_with_known_truth - subpr...
==================== 2 failed, 7 passed in 62.59s (0:01:02) ====================
